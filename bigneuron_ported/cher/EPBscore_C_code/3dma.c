/* $Revision: 1.3 $ */
// Automatically generated by MATLAB Project Wizard version 1.0

//
// This is the gateway routine for a MATLAB Math/Graphics Library-based
// C MATLAB MEX File.

#include "mex.h"

#include "stdafx.h"
#include "ma_prototype.h"
#include "lkc_prototype.h"
#include <string.h>

void mexFunction(int nlhs, mxArray *plhs[], int nrhs,
                 const mxArray *prhs[])
{
  mwSize buflen;
  int status;
  char* input_buf; 
  
  /* Check for proper number of arguments. */
  if (nrhs != 2) {
    mexErrMsgTxt("Two inputs required. Command Name and Cell Array of Arguments");
  } 
  
  /* Input must be a string. */
  if (mxIsChar(prhs[0]) != 1)
    mexErrMsgTxt("Input must be a string.");

  /* Input must be a row vector. */
  if (mxGetM(prhs[0]) != 1)
    mexErrMsgTxt("Input must be a row vector.");
    
  /* Get the length of the input string. */
  buflen = (mxGetM(prhs[0]) * mxGetN(prhs[0])) + 1;

  /* Allocate memory for input and output strings. */
  input_buf = (char*) mxCalloc(buflen, sizeof(char));

  /* Copy the string data from prhs[0] into a C string 
   * input_buf. */
  status = mxGetString(prhs[0], input_buf, buflen);
  if (status != 0) 
    mexErrMsgTxt("Not enough space. String is truncated.");

  /* Second argument must be a cell array */
  if (mxIsCell(prhs[1]) != 1)
	 mexErrMsgTxt("Second input must be a cell array.");


  if (strcmp(input_buf,"burn")==0)
  {
	  plhs[0]=mexburnmain(prhs[1]);
  }
  else if (strcmp(input_buf,"thin")==0)
  {
	  plhs[0]=mexthinmain(prhs[1]);
  }
  else if (strcmp(input_buf,"trim")==0)
  {
	  plhs[0]=mextrimmain(prhs[1]);
  }
  else if (strcmp(input_buf,"dendrite")==0)
  {
	  plhs[0]=mexdendritemain(prhs[1]);
  }

  else
  {
	mexErrMsgTxt("Command not recognized. Recognized commands are: burn.");
  }
  mxFree(input_buf);
}
